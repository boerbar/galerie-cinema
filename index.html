<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Galerie Cinéma</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'EB Garamond', serif;
            background: #050008;
            overflow: hidden;
        }
        #background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.3;
            background-size: 300px 300px;
            pointer-events: none;
        }
        .art-frame {
            max-width: 80%;
            border: 14px solid #D4AF37;
            background: #f8f8f8;
            border-radius: 6px;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            z-index: 2;
        }
        .film-image {
            max-height: 70vh;
            max-width: 100%;
            display: block;
        }
        .film-info {
            padding: 15px;
            text-align: center;
        }
        .film-title {
            font-size: 28px;
            color: #7b1fa2;
            margin: 5px 0;
            font-style: italic;
        }
        .film-details {
            font-size: 18px;
            color: #388e3c;
        }
    </style>
</head>
<body>
    <div id="background-pattern"></div>
    <div class="art-frame">
        <img id="filmImage" class="film-image" alt="Affiche de film">
        <div class="film-info">
            <div id="filmTitle" class="film-title"></div>
            <div class="film-details">
                <span id="filmDirector"></span> • <span id="filmYear"></span>
            </div>
        </div>
    </div>

    <script>
        // Liste des films avec chemins relatifs
        const films = [
            {src:"images/1.jpg", title:"L'année dernière à Marienbad", director:"Alain Resnais", year:"1961", letterboxd:"https://letterboxd.com/film/last-year-at-marienbad/"},
            {src:"images/2.jpg", title:"Le bonheur", director:"Agnès Varda", year:"1965", letterboxd:"https://letterboxd.com/film/happiness-1965/"},
            {src:"images/3.jpg", title:"Le bonheur", director:"Agnès Varda", year:"1965", letterboxd:"https://letterboxd.com/film/happiness-1965/"},
            {src:"images/4.jpg", title:"Le bonheur", director:"Agnès Varda", year:"1965", letterboxd:"https://letterboxd.com/film/happiness-1965/"},
            {src:"images/5.jpg", title:"Ulysse", director:"Agnès Varda", year:"1982", letterboxd:"https://letterboxd.com/film/ulysse/"},
            {src:"images/6.jpg", title:"Ulysse", director:"Agnès Varda", year:"1982", letterboxd:"https://letterboxd.com/film/ulysse/"},
            {src:"images/7.jpg", title:"L'opéra-mouffe", director:"Agnès Varda", year:"1958", letterboxd:"https://letterboxd.com/film/lopera-mouffe/"},
            {src:"images/8.jpg", title:"A Matter of Life and Death", director:"Michael Powell & Emeric Pressburger", year:"1946", letterboxd:"https://letterboxd.com/film/a-matter-of-life-and-death/"}
        ];

        // Motifs d'arrière-plan en SVG intégré
        const patterns = [
            'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" opacity="0.4"><path d="M0,150 L300,150 M150,0 L150,300" stroke="%232E7D32" stroke-width="2"/></svg>',
            'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" opacity="0.3"><circle cx="150" cy="150" r="100" fill="none" stroke="%234CAF50" stroke-width="2"/></svg>'
        ];

        function loadRandomFilm() {
            const film = films[Math.floor(Math.random() * films.length)];
            const pattern = patterns[Math.floor(Math.random() * patterns.length)];

            // Préchargement de l'image pour éviter le clignotement
            const img = new Image();
            img.src = film.src;
            img.onload = function() {
                document.getElementById('filmImage').src = film.src;
                document.getElementById('filmTitle').textContent = film.title;
                document.getElementById('filmDirector').textContent = film.director;
                document.getElementById('filmYear').textContent = film.year;
                document.getElementById('background-pattern').style.backgroundImage = `url('${pattern}')`;
            };

            document.querySelector('.art-frame').onclick = function() {
                window.open(film.letterboxd, '_blank', 'noopener,noreferrer');
            };
        }

        // Lancement avec gestion des erreurs
        try {
            if (document.readyState === 'complete') {
                loadRandomFilm();
            } else {
                window.addEventListener('load', loadRandomFilm);
            }
        } catch (error) {
            console.error("Erreur de chargement :", error);
            document.getElementById('filmTitle').textContent = "Chargement échoué - Rechargez (F5)";
        }
    </script>
</body>
</html>